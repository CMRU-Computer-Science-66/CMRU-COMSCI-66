generator client {
   provider   = "prisma-client-js"
   engineType = "library"
   // output     = "./client"
}

datasource db {
   provider = "postgresql"
   url      = env("DATABASE_URL")
}

enum BillingTime {
   once
   week
   month
   year
}

enum BillingType {
   event
   force
   general
   public
}

model User {
   id       Int     @id @default(autoincrement())
   title    String?
   username String?
   password String?

   studentList StudentList?
   created_at  DateTime     @default(now())

   @@map("Users")
}

model DiscordWebhook {
   id    BigInt @id
   token String

   billing Billing[]

   @@index(id)
   @@map("Discord Webhook")
}

model Billing {
   id    Int         @id @default(autoincrement())
   types BillingType @default(general)

   name        String
   description String?
   price       Int           @default(0)
   time        BillingTime?
   paid        StudentList[]

   start_at DateTime?
   end_at   DateTime?

   discord_webhook   DiscordWebhook? @relation(fields: [discord_webhookId], references: [id])
   discord_webhookId BigInt?

   @@map("Billings")
}

model StudentList {
   id Int @id @unique

   section Int
   name    String
   status  String?
   paid    Billing[]

   update_at DateTime? @updatedAt

   user   User? @relation(fields: [userId], references: [id])
   userId Int?  @unique

   @@map("Student List")
}
